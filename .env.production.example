# CodiesVibe Production Environment Configuration
# Copy this file to .env.production and update with your production credentials

# CRITICAL: Replace ALL placeholder values before deploying to production!

# Infrastructure Service Credentials (Production)
# These connect to services defined in docker-compose/infrastructure/docker-compose.infra.yml
MONGODB_URI=mongodb://admin:REPLACE_WITH_SECURE_MONGODB_PASSWORD@mongodb:27017/codiesvibe?authSource=admin
REDIS_URL=redis://:REPLACE_WITH_SECURE_REDIS_PASSWORD@redis:6379

# Application Configuration (Production)
NODE_ENV=production
PORT=4001

# GitHub OAuth (Production - use your production app)
GITHUB_CLIENT_ID=REPLACE_WITH_YOUR_PRODUCTION_GITHUB_CLIENT_ID
GITHUB_CLIENT_SECRET=REPLACE_WITH_YOUR_PRODUCTION_GITHUB_CLIENT_SECRET
GITHUB_CALLBACK_URL=https://yourdomain.com/api/auth/github/callback

# Security (Production - MUST be changed!)
JWT_SECRET=REPLACE_WITH_SECURE_JWT_SECRET_MIN_32_CHARS
COOKIE_SECRET=REPLACE_WITH_SECURE_COOKIE_SECRET_MIN_32_CHARS
CSRF_SECRET=REPLACE_WITH_SECURE_CSRF_SECRET_MIN_32_CHARS

# CORS Configuration (Production)
CORS_ORIGIN=https://yourdomain.com

# Rate Limiting (Production - more restrictive)
RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX=100        # Lower limit for production

# Nginx Gateway Configuration (Production)
NESTJS_SERVICE_HOST=codiesvibe-backend-prod
NESTJS_SERVICE_PORT=4001
FASTIFY_SERVICE_HOST=codiesvibe-fastify-prod
FASTIFY_SERVICE_PORT=4002

# Ollama Configuration (Production)
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2

# MCP Server Configuration (Production)
MCP_SERVER_URL=http://mcp-server:3001

# Logging Configuration (Production)
LOG_LEVEL=info

# Build Configuration
BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
GIT_COMMIT=$(git rev-parse --short HEAD)
VERSION=production

# Frontend Build Configuration (Production)
VITE_API_URL=https://yourdomain.com/api
VITE_APP_VERSION=production
VITE_BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
VITE_GIT_COMMIT=$(git rev-parse --short HEAD)

# SSL Configuration (Production)
SSL_CERT_PATH=/etc/ssl/certs/yourdomain.crt
SSL_KEY_PATH=/etc/ssl/private/yourdomain.key

# Monitoring Configuration (Production)
ENABLE_METRICS=true
METRICS_PORT=9090

# Database Configuration (Production)
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000

# Cache Configuration (Production)
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Email Configuration (Production - if using email features)
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASS=REPLACE_WITH_SMTP_PASSWORD

# Backup Configuration (Production)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Security Headers (Production)
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000

# Performance Configuration (Production)
COMPRESSION_ENABLED=true
STATIC_CACHE_MAX_AGE=86400

# Error Reporting (Production)
ERROR_REPORTING_ENABLED=true
ERROR_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Health Check Configuration (Production)
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Docker Configuration Notes:
# - These variables are used by both application services and infrastructure services
# - Infrastructure services run from docker-compose/infrastructure/docker-compose.infra.yml
# - Application services run from docker-compose.production.yml
# - Make sure to update both .env.production and any service-specific .env files