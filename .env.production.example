# CodiesVibe Production Environment Configuration
# Copy this file to .env.production and update with your production credentials
# NEVER commit .env.production to git!

# =============================================================================
# Infrastructure Service Credentials (Production)
# =============================================================================
# These connect to services defined in docker-compose/infrastructure/docker-compose.infra.yml
MONGODB_URI=mongodb://admin:password123@mongodb:27017/codiesvibe?authSource=admin
REDIS_URL=redis://:redis123@redis:6379

# =============================================================================
# Application Configuration (Production)
# =============================================================================
NODE_ENV=production
PORT=4001

# GitHub OAuth (Production - use your production app)
GITHUB_CLIENT_ID=your_production_github_client_id
GITHUB_CLIENT_SECRET=your_production_github_client_secret
GITHUB_CALLBACK_URL=https://your-domain.com/api/auth/github/callback

# Security (Production - use strong secrets)
JWT_SECRET=production-jwt-secret-change-immediately-min-32-chars
COOKIE_SECRET=production-cookie-secret-min-32-chars-please-change
CSRF_SECRET=production-csrf-secret-min-32-chars-change-now

# CORS Configuration (Production)
CORS_ORIGIN=https://codiesvibe.com,https://api.codiesvibe.com

# Rate Limiting (Production - stricter)
RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX=100        # Stricter than development

# Production Settings
TRUST_PROXY=true
SHUTDOWN_TIMEOUT=30000

# Ollama Configuration (Production - external service)
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2

# MCP Server Configuration (Production)
MCP_SERVER_URL=http://localhost:3001

# Logging Configuration (Production)
LOG_LEVEL=info

# =============================================================================
# Frontend Build Configuration (Production)
# =============================================================================
# Production API URL (required - update with your actual domain)
VITE_API_URL=https://api.codiesvibe.com/api

# Environment identifier
VITE_ENVIRONMENT=production

# Disable debug mode in production
VITE_DEBUG=false

# Disable development tools in production
VITE_DEV_TOOLS=false

# Application version (usually set by CI/CD pipeline)
VITE_APP_VERSION=production
VITE_BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
VITE_GIT_COMMIT=$(git rev-parse --short HEAD)

# =============================================================================
# Build Configuration
# =============================================================================
# Node environment for build process
NODE_ENV=production

# =============================================================================
# Deployment Configuration
# =============================================================================
# These are typically set by CI/CD pipeline
BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
GIT_COMMIT=$(git rev-parse --short HEAD)
VERSION=production

# =============================================================================
# Notes
# =============================================================================
# Production Setup:
#   1. Copy this file: cp .env.production.example .env.production
#   2. Update all secrets and credentials with production values
#   3. Update VITE_API_URL with your actual production domain
#   4. Set strong secrets for JWT_SECRET, COOKIE_SECRET, CSRF_SECRET
#   5. Configure GitHub OAuth with production app credentials
#
# Architecture:
#   - Infrastructure services run from docker-compose/infrastructure/docker-compose.infra.yml
#   - Application services run from docker-compose.production.yml
#   - Both share the same codiesvibe-network
#
# Important:
#   - Never commit .env.production to version control
#   - Use strong, unique secrets in production
#   - VITE_ variables are embedded at build time and visible in browser
#   - Backend services connect to infrastructure via service names (mongodb, redis)